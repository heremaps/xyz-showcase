{"version":3,"sources":["TangramLayer.js","MapContainer.js","here.js","config.js","SCENE.js","App.js","index.js"],"names":["TangramLayer","props","map","leaflet","this","context","layer","Tangram","leafletLayer","scene","events","click","onMapClick","hover","onMapHover","addTo","fromProps","toProps","updateConfig","removeFrom","MapLayer","propTypes","PropTypes","object","isRequired","func","withLeaflet","MapContainer","_React$Component","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","handleMapHover","evt","feature","tooltipActive","coordinates","leaflet_event","latlng","cat","properties","setState","popupPosition","lat","lng","popupHtml","react_default","a","createElement","undefined","split","join","componentDidMount","setTimeout","leafletElement","flyTo","center","attributionControl","addAttribution","handleDrag","marker","current","getLatLng","handleMarkerMove","handleClick","React","createRef","state","loaded","inherits","createClass","key","value","_this2","redIcon","L","Icon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","Map","ref","zoom","zoomControl","onClick","src_TangramLayer","markerPosition","length","Marker","position","draggable","onDragEnd","icon","polygon","Polygon","positions","color","Popup","className","closeButton","Component","hereCredentials","xyz","space","token","hereIsolineUrl","coords","range","concat","hereGeocoderUrl","query","hereReverseGeocodeUrl","categories","label","id","active","background","SCENE","cameras","camera1","type","sources","xyz_osm","url","url_params","access_token","max_zoom","_boston_alcohol","global","language","language_text_source","layers","boston_alcohol","data","source","draw","points","size","order","interactive","collide","places","city-points","filter","kind","kind_detail","$zoom","max","text","text_source","priority","font","family","fill","stroke","width","buffer","neighborhoods","min","earth","polygons","landuse","water","roads","not","lines","cap","highway","outline","minor_road","buildings","3d-buildings","extrude","App","updateFilterTags","tags","sceneCopy","assign","filterTags","updatePolygon","fetch","then","res","json","hasOwnProperty","turfPoly","response","isoline","component","shape","x","Number","pointsWithinPolygon","features","Index","updateAddressText","address","Response","View","Result","Location","Address","HouseNumber","Street","City","addressSearch","handleSlide","target","handleClearMarker","handleEscapeKey","keyCode","handleAddressSearch","search","handleAddressSearchClick","location","DisplayPosition","Latitude","Longitude","document","onkeydown","name","startCoordinates","checked","onChange","htmlFor","i","style","Fragment","marginRight","display","rel","href","MapContainer_MapContainer","ReactDOM","render","src_App_0","getElementById"],"mappings":"yWAIMA,+LAEkBC,GAAO,IACjBC,GAAQD,EAAME,SAAWC,KAAKC,SAA9BH,IAUR,OARAE,KAAKE,MAAQC,IAAQC,aAAa,CAC/BC,MAAOR,EAAMQ,MACbC,OAAQ,CACLC,MAAOV,EAAMW,WACbC,MAAOZ,EAAMa,cAGhBC,MAAMb,GACFE,KAAKE,mDAGMU,EAAWC,GAE7Bb,KAAKE,MAAMG,MAAMS,8DAGG,IACbhB,EAAOE,KAAKC,QAAZH,IACPE,KAAKE,MAAMa,WAAWjB,UAvBDkB,KA2B3BpB,EAAaqB,UAAY,CACvBZ,MAAOa,IAAUC,OAAOC,WACxBZ,WAAYU,IAAUG,KACtBX,WAAYQ,IAAUG,MAGTC,kBAAY1B,GChCd2B,EAAb,SAAAC,GAEG,SAAAD,EAAY1B,GAAO,IAAA4B,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAA1B,KAAAuB,IAChBE,EAAAC,OAAAE,EAAA,EAAAF,CAAA1B,KAAA0B,OAAAG,EAAA,EAAAH,CAAAH,GAAAO,KAAA9B,KAAMH,KAWTkC,eAAiB,SAACC,GACf,GAAIA,EAAIC,SAAWR,EAAK5B,MAAMqC,cAAe,CAC1C,IAAMC,EAAcH,EAAII,cAAcC,OAEhCC,EAAMN,EAAIC,QAAQM,WAAZ,YACZd,EAAKe,SAAS,CACXC,cAAe,CAACN,EAAYO,IAAKP,EAAYQ,KAC7CC,UACGC,EAAAC,EAAAC,cAAA,WACGF,EAAAC,EAAAC,cAAA,UAAKf,EAAIC,QAAQM,WAAW,kBAC5BM,EAAAC,EAAAC,cAAA,wBAAeF,EAAAC,EAAAC,cAAA,cAASf,EAAIC,QAAQM,WAAZ,eAEkBS,IAAvChB,EAAIC,QAAQM,WAAZ,UACAM,EAAAC,EAAAC,cAAA,0BAAiBF,EAAAC,EAAAC,cAAA,cAASf,EAAIC,QAAQM,WAAZ,WAE7BM,EAAAC,EAAAC,cAAA,yBAAgBF,EAAAC,EAAAC,cAAA,cAASf,EAAIC,QAAQM,WAAZ,UAEd,gBAARD,GAAiC,cAARA,GAA+B,qBAARA,EAEhDO,EAAAC,EAAAC,cAAA,qBAAYF,EAAAC,EAAAC,cAAA,cAAST,EAAIW,MAAM,KAAKC,KAAK,OAEzCL,EAAAC,EAAAC,cAAA,0BAAiBF,EAAAC,EAAAC,cAAA,cAAST,YAMtCb,EAAKe,SAAS,CACXC,cAAe,GACfG,UAAW,MAzCDnB,EA8CnB0B,kBAAoB,WACjBC,WAAW,WACR3B,EAAK3B,IAAIuD,eAAeC,MAAM7B,EAAK5B,MAAM0D,OAAQ,KACjD,KAEH9B,EAAK3B,IAAIuD,eAAeG,mBAAmBC,eACxC,2JApDahC,EAwDnBiC,WAAa,WACV,IAAMvB,EAAcV,EAAKkC,OAAOC,QAAQP,eAAeQ,YACvDpC,EAAK5B,MAAMiE,iBAAiB,CAAC3B,EAAYO,IAAKP,EAAYQ,OA1D1ClB,EA6DnBsC,YAAc,SAAC/B,GAAD,OAASP,EAAK5B,MAAMiE,iBAAiB,CAAC9B,EAAIK,OAAOK,IAAKV,EAAIK,OAAOM,OA3D5ElB,EAAKkC,OAASK,IAAMC,YAEpBxC,EAAKyC,MAAQ,CACVC,QAAQ,EACRjE,MAAO,KACPuC,cAAe,GACfG,UAAW,eAREnB,EAFtB,OAAAC,OAAA0C,EAAA,EAAA1C,CAAAH,EAAAC,GAAAE,OAAA2C,EAAA,EAAA3C,CAAAH,EAAA,EAAA+C,IAAA,SAAAC,MAAA,WAkEY,IAAAC,EAAAxE,KACAyE,EAAU,IAAIC,IAAEC,KAAK,CACxBC,QAAS,yFACTC,UAAW,gFACXC,SAAU,CAAC,GAAI,IACfC,WAAY,CAAC,GAAI,IACjBC,YAAa,CAAC,GAAI,IAClBC,WAAY,CAAC,GAAI,MAEpB,OACMpC,EAAAC,EAAAC,cAACmC,EAAA,EAAD,CACGC,IAAK,SAACA,GAAUX,EAAK1E,IAAMqF,GAC3B5B,OAAQvD,KAAKH,MAAM0D,OACnB6B,KAAMpF,KAAKH,MAAMuF,KACjBC,aAAa,EACbC,QAAStF,KAAK+D,aAEdlB,EAAAC,EAAAC,cAACwC,EAAD,CACGlF,MAAOL,KAAKH,MAAMQ,MAClBK,WAAYV,KAAK+B,iBAGjB/B,KAAKH,MAAM2F,eAAeC,QAC1B5C,EAAAC,EAAAC,cAAC2C,EAAA,EAAD,CACGC,SAAU3F,KAAKH,MAAM2F,eACrBI,WAAW,EACXC,UAAW7F,KAAK0D,WAChByB,IAAKnF,KAAK2D,OACVmC,KAAMrB,IAITzE,KAAKH,MAAMkG,QAAQN,QACnB5C,EAAAC,EAAAC,cAACiD,EAAA,EAAD,CACGC,UAAWjG,KAAKH,MAAMkG,QACtBG,MAAM,YAITlG,KAAKkE,MAAMzB,cAAcgD,QACzB5C,EAAAC,EAAAC,cAACoD,EAAA,EAAD,CACGR,SAAU3F,KAAKkE,MAAMzB,cACrB2D,UAAU,SACVC,aAAa,GAEZrG,KAAKkE,MAAMtB,gBA/GjCrB,EAAA,CAAkCyC,IAAMsC,WCLlCC,EACC,uBADDA,EAEG,yBAGHC,EAAM,CACTC,MAAO,WACPC,MAAO,2BAGJC,EAAiB,SAACC,EAAQC,GAAT,qFAAAC,OAAkGP,EAAlG,cAAAO,OAAiIP,EAAjI,yDAAAO,OAA6MF,EAAO,GAApN,KAAAE,OAA0NF,EAAO,GAAjO,WAAAE,OAAqP,GAARD,EAA7O,oBAOjBE,EAAkB,SAACC,GAAD,+DAAAF,OAAoEP,EAApE,cAAAO,OAAmGP,EAAnG,gBAAAO,OAAsIE,IAExJC,EAAwB,SAAC9E,GAAD,4EAAA2E,OAAuF3E,EAAY,GAAnG,KAAA2E,OAAyG3E,EAAY,GAArH,0DAAA2E,OAAgLP,EAAhL,cAAAO,OAA+MP,oBCnBvOW,EAAa,CAChB,CACGC,MAAO,cACPC,GAAI,cACJC,QAAQ,EACRC,WAAY,WAEf,CACGH,MAAO,cACPC,GAAI,YACJC,QAAQ,EACRC,WAAY,WAEf,CACGH,MAAO,qBACPC,GAAI,mBACJC,QAAQ,EACRC,WAAY,WAEf,CACGH,MAAO,SACPC,GAAI,SACJC,QAAQ,EACRC,WAAY,WAEf,CACGH,MAAO,SACPC,GAAI,SACJC,QAAQ,EACRC,WAAY,WAEf,CACGH,MAAO,QACPC,GAAI,QACJC,QAAQ,EACRC,WAAY,WCmQHC,EAhSD,CACXC,QAAW,CACRC,QAAW,CACRC,KAAQ,gBAGdC,QAAW,CACRC,QAAW,CACRF,KAAQ,MACRG,IAAO,iEACPC,WAAc,CACXC,aAAgBvB,EAAIE,OAEvBsB,SAAY,IAEfC,gBAAmB,CAChBP,KAAQ,UACRG,IAAA,uCAAAf,OAA8CN,EAAIC,MAAlD,yBACAqB,WAAc,CACXC,aAAgBvB,EAAIE,SAI7BwB,OAAU,CACPC,SAAY,KACZC,qBAAwB,0JAE3BC,OAAU,CACPC,eAAkB,CACfC,KAAQ,CACLC,OAAU,mBAEbC,KAAQ,CACLC,OAAU,CACPxC,MAAS,yfACTyC,KAAQ,CACL,CACG,GACA,SAEH,CACG,GACA,SAGNC,MAAS,IACTC,aAAe,EACfC,SAAW,KAIpBC,OAAU,CACPR,KAAQ,CACLC,OAAU,WAEbQ,cAAe,CACZC,OAAU,CACPC,KAAQ,WACRC,YAAe,OACfC,MAAS,CACNC,IAAO,KAGbZ,KAAQ,CACLa,KAAQ,CACLC,YAAe,8BACfC,SAAY,GACZZ,MAAS,IACTa,KAAQ,CACLC,OAAU,OACVC,KAAQ,UACRC,OAAU,CACP1D,MAAS,QACT2D,MAAS,GAGZlB,KAAQ,CACL,CACG,EACA,QAEH,CACG,EACA,QAEH,CACG,GACA,SAGNmB,OAAU,UAKtBC,cAAiB,CACdd,OAAU,CAAC,CACLC,KAAQ,CACL,gBACA,aAEHE,MAAS,CACNY,IAAO,KAGb,CACGd,KAAQ,YACRE,MAAS,CACNY,IAAO,MAIhBvB,KAAQ,CACLa,KAAQ,CACLC,YAAe,8BACfC,SAAY,GACZZ,MAAS,IACTa,KAAQ,CACLC,OAAU,OACVC,KAAQ,UACRC,OAAU,CACP1D,MAAS,QACT2D,MAAS,GAGZlB,KAAQ,CACL,CACG,EACA,QAEH,CACG,EACA,QAEH,CACG,GACA,SAGNmB,OAAU,WAMzBG,MAAS,CACN1B,KAAQ,CACLC,OAAU,WAEbC,KAAQ,CACLyB,SAAY,CACTtB,MAAS,2CACT1C,MAAS,WAIlBiE,QAAW,CACR5B,KAAQ,CACLC,OAAU,WAEbC,KAAQ,CACLyB,SAAY,CACTtB,MAAS,2CACT1C,MAAS,aAIlBkE,MAAS,CACN7B,KAAQ,CACLC,OAAU,WAEbC,KAAQ,CACLyB,SAAY,CACTtB,MAAS,2CACT1C,MAAS,aAIlBmE,MAAS,CACN9B,KAAQ,CACLC,OAAU,WAEbS,OAAU,CACPqB,IAAO,CACJpB,KAAQ,CACL,OACA,OACA,WAITT,KAAQ,CACL8B,MAAS,CACN3B,MAAS,2CACT1C,MAAS,UACT2D,MAAS,EACTW,IAAO,UAGbC,QAAW,CACRxB,OAAU,CACPC,KAAQ,WAEXT,KAAQ,CACL8B,MAAS,CACN3B,MAAS,2CACT1C,MAAS,UACT2D,MAAS,CACN,CACG,EACA,KAEH,CACG,EACA,KAEH,CACG,GACA,KAEH,CACG,GACA,KAEH,CACG,GACA,IAEH,CACG,GACA,KAGNa,QAAW,CACRxE,MAAS,UACT2D,MAAS,CACN,CACG,GACA,GAEH,CACG,GACA,UAOlBc,WAAc,CACX1B,OAAU,CACPC,KAAQ,cAEXT,KAAQ,CACL8B,MAAS,CACN3B,MAAS,2CACT1C,MAAS,UACT2D,MAAS,MAKrBe,UAAa,CACVrC,KAAQ,CACLC,OAAU,WAEbC,KAAQ,CACLyB,SAAY,CACTtB,MAAS,2CACT1C,MAAS,YAGf2E,eAAgB,CACb5B,OAAU,CACPG,MAAS,CACNY,IAAO,KAGbvB,KAAQ,CACLyB,SAAY,CACTY,QAAW,mECxEdC,cA1MZ,SAAAA,EAAYlL,GAAO,IAAA4B,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAA1B,KAAA+K,IAChBtJ,EAAAC,OAAAE,EAAA,EAAAF,CAAA1B,KAAA0B,OAAAG,EAAA,EAAAH,CAAAqJ,GAAAjJ,KAAA9B,KAAMH,KAiBTmL,iBAAmB,SAACC,GACjB,IAAMC,EAAYxJ,OAAOyJ,OAAO,GAAI1J,EAAKyC,MAAM7D,OAC/C6K,EAAUvD,QAAQM,gBAAgBJ,IAAM,uCAAAf,OAAuCN,EAAIC,MAA3C,+BAAgFwE,EAAK/H,KAAK,KAClIzB,EAAKe,SAAS,CACXnC,MAAO6K,EACPE,WAAYH,KAvBCxJ,EA4BnB4J,cAAgB,WACbC,MAAM3E,EAAelF,EAAKyC,MAAMsB,eAAgB/D,EAAKyC,MAAM2C,QAC1D0E,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KAAK,SAAAC,GACH,GAAIA,EAAIE,eAAe,YAAa,CACjC,IAAMC,EAAW5F,kBAAQ,CAACyF,EAAII,SAASC,QAAQ,GAAGC,UAAU,GAAGC,MAAMjM,IAAI,SAAAkM,GAAC,MAAI,CAACC,OAAOD,EAAE/I,MAAM,KAAK,IAAKgJ,OAAOD,EAAE/I,MAAM,KAAK,SAItHgI,EAFSiB,YAAoBzK,EAAKyC,MAAMwE,OAAQiD,GAElCQ,SAASrM,IAAI,SAAAmC,GAAO,OAAIA,EAAQM,WAAW6J,QAE/D3K,EAAKe,SAAS,CACXuD,QAASyF,EAAII,SAASC,QAAQ,GAAGC,UAAU,GAAGC,MAAMjM,IAAI,SAAAkM,GAAC,MAAI,CAACA,EAAE/I,MAAM,KAAK,GAAI+I,EAAE/I,MAAM,KAAK,QAE/FxB,EAAKuJ,iBAAiBC,QAEtBxJ,EAAKe,SAAS,CACXuD,QAAS,KAEZtE,EAAKuJ,iBAAiB,OA/CZvJ,EAqDnB4K,kBAAoB,WACjBf,MAAMrE,EAAsBxF,EAAKyC,MAAMsB,iBACtC+F,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KAAK,SAAAC,GACH,IAAMc,EAAUd,EAAIe,SAASC,KAAK,GAAGC,OAAO,GAAGC,SAASC,QACxDlL,EAAKe,SAAS,CACX8J,QAAO,GAAAxF,YAA6B9D,IAAxBsJ,EAAQM,YAA4BN,EAAQM,YAAc,GAA/D,MAAA9F,YAAyF9D,IAAnBsJ,EAAQO,OAAuBP,EAAQO,OAAS,GAAtH,KAAA/F,OAA4HwF,EAAQQ,MAC3IC,cAAa,GAAAjG,YAA6B9D,IAAxBsJ,EAAQM,YAA4BN,EAAQM,YAAc,GAA/D,MAAA9F,YAAyF9D,IAAnBsJ,EAAQO,OAAuBP,EAAQO,OAAS,GAAtH,KAAA/F,OAA4HwF,EAAQQ,WA5DvIrL,EAiEnBqC,iBAAmB,SAAC3B,GACjBV,EAAKe,SAAS,CACXgD,eAAgBrD,GAChB,WACAV,EAAK4J,gBACL5J,EAAK4K,uBAtEQ5K,EA0EnBuL,YAAc,SAAChL,GACZP,EAAKe,SAAS,CACXqE,MAAO7E,EAAIiL,OAAO1I,OACnB,WACC9C,EAAK4J,mBA9EQ5J,EAkFnByL,kBAAoB,WACjBzL,EAAKe,SAAS,CACXgD,eAAgB,IAChB,WACA/D,EAAK4J,mBAtFQ5J,EA0FnB0L,gBAAkB,SAACnL,GACI,KAAhBA,EAAIoL,SACL3L,EAAKyL,qBA5FQzL,EAgGnB4L,oBAAsB,SAACrL,GACpB,IAAMsL,EAAStL,EAAIiL,OAAO1I,MAC1B9C,EAAKe,SAAS,CACXuK,cAAeO,KAnGF7L,EAuGnB8L,yBAA2B,WACxBjC,MAAMvE,EAAgBtF,EAAKyC,MAAM6I,gBAChCxB,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KAAK,SAAAC,GAEH,GAAIA,EAAIe,SAASC,KAAK/G,OAAS,EAAG,CAC/B,IAAM+H,EAAWhC,EAAIe,SAASC,KAAK,GAAGC,OAAO,GAAGC,SAASe,gBACzDhM,EAAKqC,iBAAiB,CAAC0J,EAASE,SAAUF,EAASG,iBAEnDlM,EAAKe,SAAS,CACXuK,cAAe,cAjHRtL,EAwHnB0B,kBAAoB,WAEjByK,SAASC,UAAYpM,EAAK0L,gBAE1B7B,MAAK,uCAAAxE,OAAwCN,EAAIC,MAA5C,uDACD8E,KAAK,SAAAC,GAAG,OAAIA,EAAIC,SAChBF,KAAK,SAAAC,GACH/J,EAAKe,SAAS,CACXkG,OAAQ8C,OA9HjB/J,EAAKyC,MAAQ,CACV4J,KAAM,cACNC,iBAAkB,CAAC,mBAAoB,mBACvChI,QAAS,GACTP,eAAgB,GAChB4F,WAAY,GACZhG,KAAM,GACNyB,MAAO,GACPyF,QAAS,GACTpF,WAAYA,EACZ6F,cAAe,uBACf7K,eAAe,EACf7B,MAAOkH,GAdM9F,wEAqIV,IAAA+C,EAAAxE,KACN,OACG6C,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,OACZvD,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,WACZvD,EAAAC,EAAAC,cAAA,iDACAF,EAAAC,EAAAC,cAAA,iFACAF,EAAAC,EAAAC,cAAA,SAAO2E,KAAK,WAAWN,GAAG,UAAU4G,QAAShO,KAAKkE,MAAMhC,cAAe+L,SAAU,kBAAMzJ,EAAKhC,SAAS,CAACN,eAAgBsC,EAAKN,MAAMhC,mBACjIW,EAAAC,EAAAC,cAAA,SAAOmL,QAAQ,WAAf,kBACArL,EAAAC,EAAAC,cAAA,gCAGG/C,KAAKkE,MAAMgD,WAAWpH,IACnB,SAACwC,EAAK6L,GAAN,OACAtL,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,cAAc9B,IAAK6J,GAC5BtL,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,OAAOgB,GAAE,GAAAN,OAAKxE,EAAI8E,GAAT,UAAqBgH,MAAO,CAAC9G,WAAYhF,EAAIgF,cACpEhF,EAAI6E,SAIjBtE,EAAAC,EAAAC,cAAA,wDAEG/C,KAAKkE,MAAMsB,eAAeC,OAAS,GACnC5C,EAAAC,EAAAC,cAAAF,EAAAC,EAAAuL,SAAA,KACGxL,EAAAC,EAAAC,cAAA,+EACAF,EAAAC,EAAAC,cAAA,oCACAF,EAAAC,EAAAC,cAAA,SAAO2E,KAAK,OAAOnD,MAAOvE,KAAKkE,MAAM6I,cAAekB,SAAUjO,KAAKqN,sBACnExK,EAAAC,EAAAC,cAAA,QAAMqL,MAAO,CAACE,YAAa,OAAQC,QAAS,kBAC5C1L,EAAAC,EAAAC,cAAA,UAAQuC,QAAStF,KAAKuN,0BAAtB,WAIHvN,KAAKkE,MAAMsB,eAAeC,OAAS,GACnC5C,EAAAC,EAAAC,cAAA,WACGF,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,oBACZvD,EAAAC,EAAAC,cAAA,SACG2E,KAAK,QACLnD,MAAOvE,KAAKkE,MAAM2C,MAClBmD,IAAI,IACJX,IAAI,KACJ4E,SAAUjO,KAAKgN,cAEpB,KAAMhN,KAAKkE,MAAM2C,MAAO,YAEzBhE,EAAAC,EAAAC,cAAA,qBAAYF,EAAAC,EAAAC,cAAA,cAAS/C,KAAKkE,MAAM2C,OAAhC,mBAA+DhE,EAAAC,EAAAC,cAAA,cAAS/C,KAAKkE,MAAMoI,SAAnF,eAAgHzJ,EAAAC,EAAAC,cAAA,cAAS/C,KAAKkE,MAAMkH,WAAW3F,QAA/I,sCACA5C,EAAAC,EAAAC,cAAA,UACGuC,QAAStF,KAAKkN,mBADjB,iBAONrK,EAAAC,EAAAC,cAAA,KAAGkK,OAAO,SAASuB,IAAI,sBAAsBpH,GAAG,OAAOqH,KAAK,oBAA5D,4BAEH5L,EAAAC,EAAAC,cAAA,OAAKqD,UAAU,YACZvD,EAAAC,EAAAC,cAAC2L,EAAD,CACGnL,OAAQvD,KAAKkE,MAAM6J,iBACnB3I,KAAMpF,KAAKkE,MAAMkB,KACjBtB,iBAAkB9D,KAAK8D,iBACvBiC,QAAS/F,KAAKkE,MAAM6B,QACpBP,eAAgBxF,KAAKkE,MAAMsB,eAC3BtD,cAAelC,KAAKkE,MAAMhC,cAC1B7B,MAAOL,KAAKkE,MAAM7D,iBApMlB2D,IAAMsC,WCLxBqI,IAASC,OAAO/L,EAAAC,EAAAC,cAAC8L,EAAD,MAASjB,SAASkB,eAAe","file":"static/js/main.fd979194.chunk.js","sourcesContent":["import Tangram from 'tangram';\nimport { MapLayer, withLeaflet } from 'react-leaflet';\nimport PropTypes from 'prop-types';\n\nclass TangramLayer extends MapLayer {\n\n   createLeafletElement(props) {\n      const { map } = props.leaflet || this.context;\n\n      this.layer = Tangram.leafletLayer({\n         scene: props.scene,\n         events: {\n            click: props.onMapClick,\n            hover: props.onMapHover\n         }\n\n      }).addTo(map)\n      return this.layer;\n   }\n\n   updateLeafletElement(fromProps, toProps) {\n\n      this.layer.scene.updateConfig()\n   }\n\n   componentWillUnmount() {\n      const {map} = this.context\n      this.layer.removeFrom(map);\n   }\n}\n\nTangramLayer.propTypes = {\n  scene: PropTypes.object.isRequired,\n  onMapClick: PropTypes.func,\n  onMapHover: PropTypes.func,\n};\n\nexport default withLeaflet(TangramLayer)\n","import React from 'react';\nimport { Map, Marker, Polygon, Popup } from 'react-leaflet';\nimport L from 'leaflet';\nimport TangramLayer from './TangramLayer'\n\nexport class MapContainer extends React.Component {\n\n   constructor(props) {\n      super(props);\n      this.marker = React.createRef();\n\n      this.state = {\n         loaded: false,\n         layer: null,\n         popupPosition: [],\n         popupHtml: 'Hello there'\n      }\n   }\n\n   handleMapHover = (evt) => {\n      if (evt.feature && this.props.tooltipActive) {\n         const coordinates = evt.leaflet_event.latlng;\n\n         const cat = evt.feature.properties['Description'];\n         this.setState({\n            popupPosition: [coordinates.lat, coordinates.lng],\n            popupHtml: (\n               <div>\n                  <h3>{evt.feature.properties['Business Name']}</h3>\n                  <div>Closes at <strong>{evt.feature.properties['Closing']}</strong></div>\n                  {\n                     evt.feature.properties['Capacity'] !== undefined &&\n                     <div>Capacity of <strong>{evt.feature.properties['Capacity']}</strong></div>\n                  }\n                  <div>Located at <strong>{evt.feature.properties['Address']}</strong></div>\n                  {\n                     cat === 'All_Alcohol' || cat === 'Malt_Wine' || cat === 'Malt_Wine_Liquor'\n                     ?\n                     <div>Serves <strong>{cat.split('_').join(' ')}</strong></div>\n                     :\n                     <div>Category of <strong>{cat}</strong></div>\n                  }\n               </div>\n            )\n         })\n      } else {\n         this.setState({\n            popupPosition: [],\n            popupHtml: ''\n         })\n      }\n   }\n\n   componentDidMount = () => {\n      setTimeout(() => {\n         this.map.leafletElement.flyTo(this.props.center, 14)\n      }, 500)\n\n      this.map.leafletElement.attributionControl.addAttribution(\n         '<a href=\"https://github.com/tangrams/tangram\">Tangram</a> | <a href=\"https://here.xyz\">HERE XYZ</a> | <a href=\"https://www.openstreetmap.org/\">OSM</a>'\n      )\n   }\n\n   handleDrag = () => {\n      const coordinates = this.marker.current.leafletElement.getLatLng();\n      this.props.handleMarkerMove([coordinates.lat, coordinates.lng]);\n   }\n\n   handleClick = (evt) => this.props.handleMarkerMove([evt.latlng.lat, evt.latlng.lng]);\n\n\n   render() {\n      const redIcon = new L.Icon({\n         iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',\n         shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',\n         iconSize: [25, 41],\n         iconAnchor: [12, 41],\n         popupAnchor: [1, -34],\n         shadowSize: [41, 41]\n      });\n      return (\n            <Map\n               ref={(ref) => { this.map = ref }}\n               center={this.props.center}\n               zoom={this.props.zoom}\n               zoomControl={false}\n               onClick={this.handleClick}\n            >\n               <TangramLayer\n                  scene={this.props.scene}\n                  onMapHover={this.handleMapHover}\n               />\n               {\n                  this.props.markerPosition.length &&\n                  <Marker\n                     position={this.props.markerPosition}\n                     draggable={true}\n                     onDragEnd={this.handleDrag}\n                     ref={this.marker}\n                     icon={redIcon}\n                  />\n               }\n               {\n                  this.props.polygon.length &&\n                  <Polygon\n                     positions={this.props.polygon}\n                     color=\"#FF8281\"\n                  />\n               }\n               {\n                  this.state.popupPosition.length &&\n                  <Popup\n                     position={this.state.popupPosition}\n                     className=\"custom\"\n                     closeButton={false}\n                  >\n                     {this.state.popupHtml}\n                  </Popup>\n               }\n            </Map>\n      )\n   }\n}\n","const hereCredentials = {\n   id: 'amxmh2DxNV8EYfX6W9Lm',\n   code: 'WFmyiFcGFxyYEOgrZjDcGA'\n}\n\nconst xyz = {\n   space: 'Vv1iS7FJ',\n   token: 'AZL4Ab9z2cBFt9d2PQ2hh0k'\n}\n\nconst hereIsolineUrl = (coords, range) => `https://isoline.route.api.here.com/routing/7.2/calculateisoline.json?app_id=${hereCredentials.id}&app_code=${hereCredentials.code}&mode=shortest;pedestrian;traffic:disabled&start=geo!${coords[0]},${coords[1]}&range=${range * 60}&rangetype=time`\n\nconst maxIsolineRangeLookup = {\n   time: 5000,\n   distance: 80000\n}\n\nconst hereGeocoderUrl = (query) => `https://geocoder.api.here.com/6.2/geocode.json?app_id=${hereCredentials.id}&app_code=${hereCredentials.code}&searchtext=${query}`;\n\nconst hereReverseGeocodeUrl = (coordinates) => `https://reverse.geocoder.api.here.com/6.2/reversegeocode.json?prox=${coordinates[0]},${coordinates[1]},250&mode=retrieveAddresses&maxresults=1&gen=9&app_id=${hereCredentials.id}&app_code=${hereCredentials.code}`;\n\nexport {\n   hereCredentials,\n   xyz,\n   hereIsolineUrl,\n   maxIsolineRangeLookup,\n   hereGeocoderUrl,\n   hereReverseGeocodeUrl\n}\n","const categories = [\n   {\n      label: 'All Alcohol',\n      id: 'All_Alcohol',\n      active: true,\n      background: '#3C4BF1'\n   },\n   {\n      label: 'Malt & Wine',\n      id: 'Malt_Wine',\n      active: true,\n      background: '#50D05E'\n   },\n   {\n      label: 'Malt, Wine, Liquor',\n      id: 'Malt_Wine_Liquor',\n      active: true,\n      background: '#E265F0'\n   },\n   {\n      label: 'Tavern',\n      id: 'Tavern',\n      active: true,\n      background: '#EC3B43'\n   },\n   {\n      label: 'Farmer',\n      id: 'Farmer',\n      active: true,\n      background: '#8BFFF2'\n   },\n   {\n      label: 'Other',\n      id: 'Other',\n      active: true,\n      background: 'yellow'\n   }\n]\n\nexport { categories };\n","import {\n   xyz\n} from './here.js';\nimport {\n   categories\n} from './config';\nconst SCENE = {\n   \"cameras\": {\n      \"camera1\": {\n         \"type\": \"perspective\"\n      }\n   },\n   \"sources\": {\n      \"xyz_osm\": {\n         \"type\": \"MVT\",\n         \"url\": \"https://xyz.api.here.com/tiles/osmbase/256/all/{z}/{x}/{y}.mvt\",\n         \"url_params\": {\n            \"access_token\": xyz.token\n         },\n         \"max_zoom\": 16\n      },\n      \"_boston_alcohol\": {\n         \"type\": \"GeoJSON\",\n         \"url\": `https://xyz.api.here.com/hub/spaces/${xyz.space}/tile/web/{z}_{x}_{y}`,\n         \"url_params\": {\n            \"access_token\": xyz.token\n         }\n      }\n   },\n   \"global\": {\n      \"language\": \"en\",\n      \"language_text_source\": \"function() {\\n    // Use preferred language label if available\\n    return (global.language && feature['name:'+global.language]) || feature.name;\\n}\\n\"\n   },\n   \"layers\": {\n      \"boston_alcohol\": {\n         \"data\": {\n            \"source\": \"_boston_alcohol\"\n         },\n         \"draw\": {\n            \"points\": {\n               \"color\": \"function() {\\n    if (feature.Description === 'All_Alcohol') {\\n        return '#3C4BF1';\\n    } else if (feature.Description === 'Farmer') {\\n        return '#8BFFF2'\\n    } else if (feature.Description === 'Malt_Wine') {\\n        return '#50D05E'\\n    } else if (feature.Description === 'Malt_Wine_Liquor') {\\n        return '#E265F0'\\n    } else if (feature.Description === 'Other') {\\n        return 'yellow'\\n    } else if (feature.Description === 'Tavern') {\\n        return '#EC3B43'\\n    }\\n}\\n\",\n               \"size\": [\n                  [\n                     13,\n                     \"7.5px\"\n                  ],\n                  [\n                     16,\n                     \"16px\"\n                  ]\n               ],\n               \"order\": 10000,\n               \"interactive\": true,\n               \"collide\": false\n            }\n         }\n      },\n      \"places\": {\n         \"data\": {\n            \"source\": \"xyz_osm\"\n         },\n         \"city-points\": {\n            \"filter\": {\n               \"kind\": \"locality\",\n               \"kind_detail\": \"city\",\n               \"$zoom\": {\n                  \"max\": 18\n               }\n            },\n            \"draw\": {\n               \"text\": {\n                  \"text_source\": \"global.language_text_source\",\n                  \"priority\": 10,\n                  \"order\": 999,\n                  \"font\": {\n                     \"family\": \"Lato\",\n                     \"fill\": \"#C3CDD4\",\n                     \"stroke\": {\n                        \"color\": \"white\",\n                        \"width\": 4\n                     },\n                     // \"transform\": \"uppercase\",\n                     \"size\": [\n                        [\n                           4,\n                           \"15px\"\n                        ],\n                        [\n                           8,\n                           \"18px\"\n                        ],\n                        [\n                           12,\n                           \"26px\"\n                        ]\n                     ],\n                     \"buffer\": \"2px\"\n                  }\n               }\n            }\n         },\n         \"neighborhoods\": {\n            \"filter\": [{\n                  \"kind\": [\n                     \"neighbourhood\",\n                     \"macrohood\"\n                  ],\n                  \"$zoom\": {\n                     \"min\": 13\n                  }\n               },\n               {\n                  \"kind\": \"microhood\",\n                  \"$zoom\": {\n                     \"min\": 15\n                  }\n               }\n            ],\n            \"draw\": {\n               \"text\": {\n                  \"text_source\": \"global.language_text_source\",\n                  \"priority\": 10,\n                  \"order\": 999,\n                  \"font\": {\n                     \"family\": \"Lato\",\n                     \"fill\": \"#C3CDD4\",\n                     \"stroke\": {\n                        \"color\": \"white\",\n                        \"width\": 4\n                     },\n                     // \"transform\": \"uppercase\",\n                     \"size\": [\n                        [\n                           4,\n                           \"10px\"\n                        ],\n                        [\n                           8,\n                           \"14px\"\n                        ],\n                        [\n                           12,\n                           \"14px\"\n                        ]\n                     ],\n                     \"buffer\": \"2px\"\n                  }\n               }\n            }\n         }\n      },\n      \"earth\": {\n         \"data\": {\n            \"source\": \"xyz_osm\"\n         },\n         \"draw\": {\n            \"polygons\": {\n               \"order\": \"function() { return feature.sort_rank; }\",\n               \"color\": \"white\"\n            }\n         }\n      },\n      \"landuse\": {\n         \"data\": {\n            \"source\": \"xyz_osm\"\n         },\n         \"draw\": {\n            \"polygons\": {\n               \"order\": \"function() { return feature.sort_rank; }\",\n               \"color\": \"#E9EEF1\"\n            }\n         }\n      },\n      \"water\": {\n         \"data\": {\n            \"source\": \"xyz_osm\"\n         },\n         \"draw\": {\n            \"polygons\": {\n               \"order\": \"function() { return feature.sort_rank; }\",\n               \"color\": \"#DEE1E3\"\n            }\n         }\n      },\n      \"roads\": {\n         \"data\": {\n            \"source\": \"xyz_osm\"\n         },\n         \"filter\": {\n            \"not\": {\n               \"kind\": [\n                  \"path\",\n                  \"rail\",\n                  \"ferry\"\n               ]\n            }\n         },\n         \"draw\": {\n            \"lines\": {\n               \"order\": \"function() { return feature.sort_rank; }\",\n               \"color\": \"#C3CDD4\",\n               \"width\": 8,\n               \"cap\": \"round\"\n            }\n         },\n         \"highway\": {\n            \"filter\": {\n               \"kind\": \"highway\"\n            },\n            \"draw\": {\n               \"lines\": {\n                  \"order\": \"function() { return feature.sort_rank; }\",\n                  \"color\": \"#D3DCE1\",\n                  \"width\": [\n                     [\n                        5,\n                        5000\n                     ],\n                     [\n                        8,\n                        800\n                     ],\n                     [\n                        10,\n                        200\n                     ],\n                     [\n                        12,\n                        100\n                     ],\n                     [\n                        14,\n                        40\n                     ],\n                     [\n                        18,\n                        20\n                     ]\n                  ],\n                  \"outline\": {\n                     \"color\": \"#EEEEEE\",\n                     \"width\": [\n                        [\n                           16,\n                           0\n                        ],\n                        [\n                           18,\n                           1.5\n                        ]\n                     ]\n                  }\n               }\n            }\n         },\n         \"minor_road\": {\n            \"filter\": {\n               \"kind\": \"minor_road\"\n            },\n            \"draw\": {\n               \"lines\": {\n                  \"order\": \"function() { return feature.sort_rank; }\",\n                  \"color\": \"#F8FAFB\",\n                  \"width\": 5\n               }\n            }\n         }\n      },\n      \"buildings\": {\n         \"data\": {\n            \"source\": \"xyz_osm\"\n         },\n         \"draw\": {\n            \"polygons\": {\n               \"order\": \"function() { return feature.sort_rank; }\",\n               \"color\": \"#E9EBEB\"\n            }\n         },\n         \"3d-buildings\": {\n            \"filter\": {\n               \"$zoom\": {\n                  \"min\": 15\n               }\n            },\n            \"draw\": {\n               \"polygons\": {\n                  \"extrude\": \"function () { return feature.height > 20 || $zoom >= 16; }\"\n               }\n            }\n         }\n      }\n   }\n}\n\nexport default SCENE;\n","import React from 'react';\nimport './App.css';\nimport { MapContainer } from './MapContainer';\nimport { hereIsolineUrl, hereReverseGeocodeUrl, hereGeocoderUrl, xyz } from './here';\nimport pointsWithinPolygon from '@turf/points-within-polygon';\nimport { polygon } from '@turf/helpers'\nimport { categories } from './config.js'\n\nimport SCENE from './SCENE';\n\nclass App extends React.Component {\n\n   constructor(props) {\n      super(props);\n      this.state = {\n         name: 'Seattle, WA',\n         startCoordinates: [42.35999762427866, -71.05780662703944],\n         polygon: [],\n         markerPosition: [],\n         filterTags: '',\n         zoom: 10,\n         range: 20,\n         address: '',\n         categories: categories,\n         addressSearch: '134 Salem St. Boston',\n         tooltipActive: false,\n         scene: SCENE\n      }\n   }\n\n   updateFilterTags = (tags) => {\n      const sceneCopy = Object.assign({}, this.state.scene);\n      sceneCopy.sources._boston_alcohol.url = `https://xyz.api.here.com/hub/spaces/${xyz.space}/tile/web/{z}_{x}_{y}?tags=` + tags.join(',');\n      this.setState({\n         scene: sceneCopy,\n         filterTags: tags\n      })\n   }\n\n\n   updatePolygon = () => {\n      fetch(hereIsolineUrl(this.state.markerPosition, this.state.range))\n      .then(res => res.json())\n      .then(res => {\n         if (res.hasOwnProperty('response')) {\n            const turfPoly = polygon([res.response.isoline[0].component[0].shape.map(x => [Number(x.split(',')[1]), Number(x.split(',')[0])])]);\n\n            const within = pointsWithinPolygon(this.state.points, turfPoly);\n\n            const tags = within.features.map(feature => feature.properties.Index);\n\n            this.setState({\n               polygon: res.response.isoline[0].component[0].shape.map(x => [x.split(',')[0], x.split(',')[1]])\n            })\n            this.updateFilterTags(tags);\n         } else {\n            this.setState({\n               polygon: [],\n            })\n            this.updateFilterTags([]);\n         }\n      });\n   }\n\n\n   updateAddressText = () => {\n      fetch(hereReverseGeocodeUrl(this.state.markerPosition))\n      .then(res => res.json())\n      .then(res => {\n         const address = res.Response.View[0].Result[0].Location.Address;\n         this.setState({\n            address: `${address.HouseNumber !== undefined ? address.HouseNumber : ''}  ${address.Street !== undefined ? address.Street : ''} ${address.City}`,\n            addressSearch: `${address.HouseNumber !== undefined ? address.HouseNumber : ''}  ${address.Street !== undefined ? address.Street : ''} ${address.City}`\n         })\n      })\n   }\n\n   handleMarkerMove = (coordinates) => {\n      this.setState({\n         markerPosition: coordinates\n      }, () => {\n         this.updatePolygon();\n         this.updateAddressText();\n      })\n   }\n\n   handleSlide = (evt) => {\n      this.setState({\n         range: evt.target.value\n      },() => {\n         this.updatePolygon();\n      })\n   }\n\n   handleClearMarker = () => {\n      this.setState({\n         markerPosition: [],\n      }, () => {\n         this.updatePolygon();\n      })\n   }\n\n   handleEscapeKey = (evt) => {\n      if (evt.keyCode === 27) {\n         this.handleClearMarker();\n      }\n   }\n\n   handleAddressSearch = (evt) => {\n      const search = evt.target.value;\n      this.setState({\n         addressSearch: search\n      })\n   }\n\n   handleAddressSearchClick = () => {\n      fetch(hereGeocoderUrl(this.state.addressSearch))\n      .then(res => res.json())\n      .then(res => {\n\n         if (res.Response.View.length > 0) {\n            const location = res.Response.View[0].Result[0].Location.DisplayPosition;\n            this.handleMarkerMove([location.Latitude, location.Longitude]);\n         } else {\n            this.setState({\n               addressSearch: 'Error!'\n            })\n         }\n\n      })\n   }\n\n   componentDidMount = () => {\n\n      document.onkeydown = this.handleEscapeKey;\n\n      fetch(`https://xyz.api.here.com/hub/spaces/${xyz.space}/search?access_token=AbuvUKANJJEZR4nb1zkEXBE&tags=`)\n         .then(res => res.json())\n         .then(res => {\n            this.setState({\n               points: res\n            })\n         });\n   }\n\n   render() {\n      return (\n         <div className=\"app\">\n            <div className=\"sidebar\">\n               <h1>Boston Liquor Licenses üçª</h1>\n               <p>List of establishments with liquor licenses in Boston, MA from 2016.</p>\n               <input type=\"checkbox\" id=\"tooltip\" checked={this.state.tooltipActive} onChange={() => this.setState({tooltipActive: !this.state.tooltipActive})} />\n               <label htmlFor=\"tooltip\">Tooltip active</label>\n               <h2>Establishment type</h2>\n\n               {\n                  this.state.categories.map(\n                     (cat, i) =>\n                     <div className=\"line-parent\" key={i}>\n                           <div className=\"line\" id={`${cat.id}-label`} style={{background: cat.background}}></div>\n                           {cat.label}\n                     </div>\n                  )\n               }\n               <h2>Explore establishments in walking distance</h2>\n               {\n                  this.state.markerPosition.length < 1 &&\n                  <>\n                     <p>Click the map to add a draggable marker to explore establishments.</p>\n                     <p>...or enter an address:</p>\n                     <input type=\"text\" value={this.state.addressSearch} onChange={this.handleAddressSearch} />\n                     <span style={{marginRight: '10px', display: 'inline-block'}}></span>\n                     <button onClick={this.handleAddressSearchClick}>Search</button>\n                  </>\n               }\n               {\n                  this.state.markerPosition.length > 0 &&\n                  <div>\n                     <div className=\"slider-container\">\n                        <input\n                           type=\"range\"\n                           value={this.state.range}\n                           min=\"1\"\n                           max=\"60\"\n                           onChange={this.handleSlide}\n                        />\n                     {\"  \"}{this.state.range}{\" minutes\"}\n                     </div>\n                     <p>Within a <strong>{this.state.range}</strong> minute walk of <strong>{this.state.address}</strong>, there are <strong>{this.state.filterTags.length}</strong> establishments that serve liquor.</p>\n                     <button\n                        onClick={this.handleClearMarker}\n                     >\n                        Clear Filter\n                     </button>\n                  </div>\n               }\n               <a target=\"_blank\" rel=\"noopener noreferrer\" id=\"link\" href=\"https://here.xyz\">Get mappy with HERE XYZ</a>\n            </div>\n            <div className=\"map-grid\">\n               <MapContainer\n                  center={this.state.startCoordinates}\n                  zoom={this.state.zoom}\n                  handleMarkerMove={this.handleMarkerMove}\n                  polygon={this.state.polygon}\n                  markerPosition={this.state.markerPosition}\n                  tooltipActive={this.state.tooltipActive}\n                  scene={this.state.scene}\n               />\n            </div>\n         </div>\n      );\n   }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}